<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>TrashRoom</title>
</head>
<body>
  <h2>üéÆ TrashRoom ‚Äì —Ç–µ—Å—Ç–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞</h2>
  <input id="nickname" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫" />
  <input id="theme" placeholder="–¢–µ–º–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: IT)" />
  <input id="count" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä–æ–∫–æ–≤" />
  <button onclick="createRoom()">–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>

  <br><br>
  <input id="joinRoomId" placeholder="ID –∫–æ–º–Ω–∞—Ç—ã" />
  <button onclick="joinRoom()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>

  <br><br>
  <button onclick="startGame()">‚ñ∂ –ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>

  <pre id="output"></pre>

  <script>
    let currentRoomId = null;
    let currentPlayer = null;

    async function createRoom() {
      const theme = document.getElementById("theme").value || "–æ–±—â–∞—è";
      const count = parseInt(document.getElementById("count").value || "2");
      const res = await fetch("/api/create-room", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ theme, maxPlayers: count })
      });
      const room = await res.json();
      currentRoomId = room.id;
      document.getElementById("output").innerText = "–°–æ–∑–¥–∞–Ω–∞ –∫–æ–º–Ω–∞—Ç–∞: " + room.id;
    }

    async function joinRoom() {
      const playerName = document.getElementById("nickname").value;
      const roomId = document.getElementById("joinRoomId").value;
      currentRoomId = roomId;
      currentPlayer = playerName;
      const res = await fetch("/api/join-room", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ roomId, playerName })
      });
      const data = await res.json();
      document.getElementById("output").innerText = JSON.stringify(data, null, 2);
    }

    async function startGame() {
      const res = await fetch("/api/start-game", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({ roomId: currentRoomId })
      });
      const data = await res.json();
      document.getElementById("output").innerText = JSON.stringify(data, null, 2);
    }
  </script>
</body>
</html>
